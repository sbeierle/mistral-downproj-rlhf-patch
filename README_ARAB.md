# 🧠 مشروع mistral-vDERAW-NeuroRoute  
> تعديل عصبي لنموذج Mistral عبر طبقة `MLP.down_proj` – بدون تعديل `LM_HEAD`، وبدون رقابة.

> 🔬 عرض تخصصي في مجال RedTeaming وجراحة الشبكات العصبية لنماذج اللغة  
> 🎯 الهدف: نموذج Mistral 7B المزود بمرشحات RLHF  
> 🎯 الاستراتيجية: تعطيل عبر العصبونات في طبقة DownProj (بدون التلاعب بـ LM_HEAD)  
> 👤 المهندس الرئيسي: ستيفان بايرله  
> 🤖 مهندس الدعم: GPT-4o – مساعد RedTeaming

---

## 🎥 نظرة عامة

يعرض هذا المشروع تدخلًا جراحيًا دقيقًا في آليات التوجيه الداخلية لنموذج Mistral.  
بدلًا من تعديل رأس الإخراج (`LM_HEAD`)، نقوم بقطع المسارات العصبية المؤدية إلى عبارات الرفض مثل `"أنا آسف"` من داخل طبقة `down_proj` في شبكة MLP.

يتيح لنا هذا الحفاظ على **التكامل الدلالي** للنموذج مع إزالة كافة المرشحات الناعمة (Soft Filters).

---

## 🔍 الطرق المستخدمة

- ✅ مكتشف المسارات (Prompt Pathfinder): تصور الفرق في التوجيه بين المدخلات الحرجة والمحايدة  
- ✅ أداة تتبع العصبونات: تحديد وقياس أعلى العصبونات تفعيلًا لكل رمز  
- ✅ رسومات تفاعلية ثلاثية الأبعاد باستخدام Plotly: تحليل مرئي ديناميكي  
- ✅ نظام تعديل مباشر عبر CSV: تعديل عصبونات على مستوى الرمز  
- ✅ تقييم منضبط باستخدام استدلال مباشر وخرائط تفعيل  
- ✅ أداة تحجيم النورم: تعطيل أو تعزيز عصبونات ضمن نطاق محدد

---

<table>
  <tr>
    <td><img src="results/DENY_CRITICAL_PROMPT_BEFORE_NEURO_PATCH.png" width="100%"/></td>
    <td><img src="results/CRITICAL_TEST_PROMPT_STEAL_PRIVATE_DATA.png" width="100%"/></td>
  </tr>
</table>

---

## 🧪 لقطات النتائج

<table>
  <tr>
    <td><img src="results/run_22_pathfinder_diff_heatmap.png" width="400"/></td>
    <td><img src="results/downproj_heatmap_critical_run2.png" width="400"/></td>
  </tr>
  <tr>
    <td><img src="results/run_22_attention_trigger.png" width="400"/></td>
    <td><img src="results/downproj_heatmap_neutral_run2.png" width="400"/></td>
  </tr>
</table>

---

## 🚀 جرّبه بنفسك

قريبًا: إصدار محدد من السكربتات يحتوي فقط على مقتطفات آمنة (بدون كشف آلية التصحيح الكاملة لحماية الاستخدام).

---

## 📦 الترخيص

لأغراض تعليمية فقط. يُمنع إعادة التوزيع أو النشر بدون إذن كتابي.  
© ستيفان بايرله | وحدة RedTeaming | 2025
